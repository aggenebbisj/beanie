"use strict";angular.module("breweryApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngJustGage"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/monitor",{templateUrl:"views/monitor.html",controller:"ChatCtrl"}).when("/recipe",{templateUrl:"views/recipe.html",controller:"RestCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("breweryApp").controller("HeaderController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("breweryApp").controller("MainCtrl",["$scope","$rootScope",function(a,b){b.serverUrl="http://localhost:8080",a.updateUrl=function(a){b.serverUrl=a}}]),angular.module("breweryApp").controller("ChatCtrl",["$scope","restService","$rootScope",function(a,b,c){function d(b,c){var d=new Date,e={time:d.toLocaleString(),message:b,success:c};a.messages.push(e)}function e(a){b.post(a).success(function(a){angular.isObject(a)&&(d(a,!0),console.log("success: "+a))}).error(function(a){d(a,!1),console.log("failed:  "+a)})}a.error={value:!1,text:""},a.readings={gauge1:"50",gauge2:"30",gauge3:"100",gauge4:"0"},a.messages=[],a.operations={yeast:{operation:"add",name:"yeast",unit:"liter",value:0,activate:function(a){console.log(a),0!==a.value&&e(c.serverUrl+"/ingredient/"+a.name+"/"+a.value+"/"+a.unit)}},temperature:{operation:"change",unit:"celsius",name:"temperature",value:0,activate:function(b){console.log(b),0!==b.value&&e(a.serverUrl+"/"+b.name+"/"+b.value+"/"+b.unit)}},waiting:{operation:"",unit:"minutes",name:"wait",value:0,activate:function(b){console.log(b),0!==b.value&&e(a.serverUrl+"/"+b.name+"/PT"+b.value+"M")}}}}]),angular.module("breweryApp").controller("RestCtrl",["$scope","restService","$rootScope",function(a,b,c){function d(b){a.recipeSteps.push(b)}function e(a,c){b.postWithData(a,c).success(function(a){f(a),angular.isObject(a)&&console.log("success: "+a)}).error(function(a){g(a),console.log("failed:  "+a)})}function f(b){a.error.value=!0,a.error.text=b}function g(b){a.error.value=!0,a.error.text=b}a.recipeSteps=[],a.recipeName="",a.operations={yeast:{operation:"add",name:"yeast",unit:"liter",value:0,activate:function(a){var b={type:"addIngredient",ingredient:a.name,volume:{value:a.value,unit:a.unit}};d(b)}},temperature:{operation:"change",unit:"celsius",name:"temperature",value:0,activate:function(a){var b={type:"changeTemperature",temperature:{value:a.value,scale:a.unit}};d(b)}},waiting:{operation:"",unit:"minutes",name:"wait",value:0,activate:function(a){var b={type:"stableTemperature",duration:"PT"+a.value+"M"};d(b)}}},a.submitRecipe=function(){var b={name:a.recipeName,steps:a.recipeSteps};e(c.serverUrl+"/brewer/recipe",b)}}]),angular.module("breweryApp").factory("restService",["$http",function(a){return{get:function(b){return a({method:"GET",url:b})},post:function(b){return a({method:"POST",url:b})},postWithData:function(b,c){return a({method:"POST",url:b,headers:{"Content-Type":"application/json"},data:c})}}}]);